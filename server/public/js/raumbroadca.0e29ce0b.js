(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["raumbroadca"],{"14bf":function(e,t,n){},"8fac":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h3",[e._v("Live stream vanaf PC bij Raum ")]),n("video",{attrs:{mute:"true",playsinline:"",autoplay:"",id:"v",width:"50%",height:"50%"}})])}],c=(n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("b85c")),i=(n("96cf"),n("1da1")),o=(n("8055"),{data:function(){return{user:"hello"}},created:function(){this.videoStream()},mounted:function(){},computed:{},methods:{videoStream:function(){return Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o,s,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={iceServers:[{urls:["stun:stun.l.google.com:19302"]}]},function(){return Math.floor(1e4*Math.random())},n="raumlivestream",r="camera",a=new Map,s=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!o){e.next=2;break}return e.abrupt("return",o);case 2:return e.abrupt("return",new Promise((function(e,r){try{window.location.protocol;o=new WebSocket("wss://circusfamilyprojects.nl:4084/raumlivestream");var a=function r(){o.send(JSON.stringify({type:"register",peerType:n,peerId:t})),o.removeEventListener("open",r),e(o)};o.addEventListener("open",a)}catch(c){r(c)}})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.prev=6,console.log("in camera"),e.next=10,navigator.mediaDevices.getUserMedia({video:{width:{exact:1280},height:{exact:720},frameRate:{min:30,max:120}},audio:!1});case 10:return u=e.sent,window.v.srcObject=u,window.v.play(),e.next=15,s(n,r);case 15:d=e.sent,d.addEventListener("message",function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(r){var i,o,s,f,l,p,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=JSON.parse(r.data),console.log("msg",i),"screens"!==i.type){e.next=19;break}o=Object(c["a"])(i.screens),e.prev=4,f=regeneratorRuntime.mark((function e(){var r,i,o,f,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=s.value,i=new RTCPeerConnection(t),a.set(r,i),o=Object(c["a"])(u.getTracks());try{for(o.s();!(f=o.n()).done;)l=f.value,i.addTrack(l,u)}catch(m){o.e(m)}finally{o.f()}return e.next=7,i.createOffer();case 7:return p=e.sent,e.next=10,i.setLocalDescription(p);case 10:i.onicecandidate=function(e){e.candidate&&d.send(JSON.stringify({type:"candidate",from:n,to:r,data:e.candidate}))},d.send(JSON.stringify({type:"offer",to:r,from:n,data:i.localDescription}));case 12:case"end":return e.stop()}}),e)})),o.s();case 7:if((s=o.n()).done){e.next=11;break}return e.delegateYield(f(),"t0",9);case 9:e.next=7;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e["catch"](4),o.e(e.t1);case 16:return e.prev=16,o.f(),e.finish(16);case 19:"answer"===i.type&&(l=a.get(i.from),l.setRemoteDescription(i.data)),"disconnect"===i.type&&(p=a.get(i.from),p&&(console.log("Disconnecting from",i.from),p.close(),a.delete(i.from))),"candidate"===i.type&&(m=a.get(i.from),m&&(console.log("Adding candidate to",i.from),m.addIceCandidate(new RTCIceCandidate(i.data))));case 22:case"end":return e.stop()}}),e,null,[[4,13,16,19]])})));return function(t){return e.apply(this,arguments)}}()),e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](6),console.error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[6,19]])})))()}}}),s=o,u=(n("96e6"),n("2877")),d=Object(u["a"])(s,r,a,!1,null,"32e1ec2c",null);t["default"]=d.exports},"96e6":function(e,t,n){"use strict";var r=n("14bf"),a=n.n(r);a.a}}]);
//# sourceMappingURL=raumbroadca.0e29ce0b.js.map