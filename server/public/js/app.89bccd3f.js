(function(e){function t(t){for(var r,c,i=t[0],s=t[1],u=t[2],l=0,f=[];l<i.length;l++)c=i[l],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&f.push(a[c][0]),a[c]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);d&&d(t);while(f.length)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var s=n[i];0!==a[s]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={app:0},o=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var d=s;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),a=n.n(r);a.a},1:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],c={name:"app"},i=c,s=(n("034f"),n("2877")),u=Object(s["a"])(i,a,o,!1,null,null,null),d=u.exports,l=n("8c4f"),f=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},p=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h3",[e._v("Live Video Stream (broadcast)")]),n("video",{attrs:{mute:"true",playsinline:"",autoplay:"",id:"v",width:"50%",height:"50%"}})])}],m=(n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("b85c")),v=(n("96cf"),n("1da1")),h=(n("8055"),{data:function(){return{}},mounted:function(){Object(v["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o,c,i,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={iceServers:[{urls:["stun:stun.l.google.com:19302"]}]},n=function(){return Math.floor(1e4*Math.random())},r=n(),a="camera",o=new Map,i=function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!c){e.next=2;break}return e.abrupt("return",c);case 2:return e.abrupt("return",new Promise((function(e,r){try{window.location.protocol;c=new WebSocket("wss://circusfamilyprojects.nl:4084");var a=function r(){c.send(JSON.stringify({type:"register",peerType:n,peerId:t})),c.removeEventListener("open",r),e(c)};c.addEventListener("open",a)}catch(o){r(o)}})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.prev=6,console.log("in camera"),e.next=10,navigator.mediaDevices.getUserMedia({video:!0,audio:!1});case 10:return s=e.sent,window.v.srcObject=s,e.next=14,i(r,a);case 14:u=e.sent,u.addEventListener("message",function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(n){var a,c,i,d,l,f,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=JSON.parse(n.data),console.log("msg",a),"screens"!==a.type){e.next=19;break}c=Object(m["a"])(a.screens),e.prev=4,d=regeneratorRuntime.mark((function e(){var n,a,c,d,l,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=i.value,a=new RTCPeerConnection(t),o.set(n,a),c=Object(m["a"])(s.getTracks());try{for(c.s();!(d=c.n()).done;)l=d.value,a.addTrack(l,s)}catch(p){c.e(p)}finally{c.f()}return e.next=7,a.createOffer();case 7:return f=e.sent,e.next=10,a.setLocalDescription(f);case 10:a.onicecandidate=function(e){e.candidate&&u.send(JSON.stringify({type:"candidate",from:r,to:n,data:e.candidate}))},u.send(JSON.stringify({type:"offer",to:n,from:r,data:a.localDescription}));case 12:case"end":return e.stop()}}),e)})),c.s();case 7:if((i=c.n()).done){e.next=11;break}return e.delegateYield(d(),"t0",9);case 9:e.next=7;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e["catch"](4),c.e(e.t1);case 16:return e.prev=16,c.f(),e.finish(16);case 19:"answer"===a.type&&(l=o.get(a.from),l.setRemoteDescription(a.data)),"disconnect"===a.type&&(f=o.get(a.from),f&&(console.log("Disconnecting from",a.from),f.close(),o.delete(a.from))),"candidate"===a.type&&(p=o.get(a.from),p&&(console.log("Adding candidate to",a.from),p.addIceCandidate(new RTCIceCandidate(a.data))));case 22:case"end":return e.stop()}}),e,null,[[4,13,16,19]])})));return function(t){return e.apply(this,arguments)}}()),e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](6),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[6,18]])})))()},computed:{},methods:{}}),w=h,g=(n("6bc9"),Object(s["a"])(w,f,p,!1,null,"5c50c66e",null)),y=g.exports,b=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},x=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h3",[e._v("Live Video Stream (receiving)")]),n("video",{attrs:{mute:"true",playsinline:"",autoplay:"",id:"v",width:"50%",height:"50%"}}),n("div",{staticClass:"hidden",attrs:{id:"controls"}},[n("div",[e._v("Someone is here! Press Play.")]),n("button",{attrs:{id:"play"}},[e._v(" Play ")])]),n("div",{attrs:{id:"wait"}},[e._v(" Waiting for someone to connect. ")])])}],O={data:function(){return{}},mounted:function(){Object(v["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o,c,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={iceServers:[{urls:["stun:stun.l.google.com:19302"]}]},window.play.addEventListener("click",(function(){try{window.v.play(),window.controls.classList.add("hidden")}catch(e){console.error(e)}})),n=function(){return Math.floor(1e4*Math.random())},r=n(),a="screen",o=new Map,i=function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!c){e.next=2;break}return e.abrupt("return",c);case 2:return e.abrupt("return",new Promise((function(e,r){try{window.location.protocol;c=new WebSocket("wss://circusfamilyprojects.nl:4084");var a=function r(){c.send(JSON.stringify({type:"register",peerType:n,peerId:t})),c.removeEventListener("open",r),e(c)};c.addEventListener("open",a)}catch(o){r(o)}})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.prev=7,console.log("in screen"),e.next=11,i(r,a);case 11:s=e.sent,s.addEventListener("message",function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(n){var a,c,i,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a=JSON.parse(n.data),console.log("msg",a),"offer"!==a.type){e.next=17;break}return c=new RTCPeerConnection(t),o.set(a.from,c),c.ontrack=function(e){console.log("on track",e),window.v.srcObject=e.streams[0],window.wait.classList.add("hidden"),window.controls.classList.remove("hidden")},c.onicecandidate=function(e){e.candidate&&s.send(JSON.stringify({type:"candidate",from:r,to:a.from,data:e.candidate}))},e.next=10,c.setRemoteDescription(a.data);case 10:return e.next=12,c.createAnswer();case 12:return i=e.sent,e.next=15,c.setLocalDescription(i);case 15:console.log("sending answer"),s.send(JSON.stringify({to:a.from,from:r,type:"answer",data:c.localDescription}));case 17:"disconnect"===a.type&&(u=o.get(a.from),u&&(console.log("Disconnecting from",a.from),u.ontrack=null,u.onicecandidate=null,u.close(),o.delete(a.from))),"candidate"===a.type&&(d=o.get(a.from),d&&(console.log("Adding candidate to",a.from),d.addIceCandidate(new RTCIceCandidate(a.data)))),e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](0),console.error(e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t){return e.apply(this,arguments)}}()),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](7),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[7,15]])})))()},computed:{},methods:{}},k=O,j=(n("7217"),Object(s["a"])(k,b,x,!1,null,"73916cf2",null)),_=j.exports;r["a"].use(l["a"]);var R=new l["a"]({routes:[{path:"/"},{path:"/signify"},{path:"/broadcast",name:"/Broadcast",component:y},{path:"/robeco"},{path:"/livestream",name:"/Livestream",component:_}]});r["a"].config.productionTip=!1,new r["a"]({router:R,render:function(e){return e(d)}}).$mount("#app")},"6bc9":function(e,t,n){"use strict";var r=n("fe9a"),a=n.n(r);a.a},7217:function(e,t,n){"use strict";var r=n("d688"),a=n.n(r);a.a},"85ec":function(e,t,n){},d688:function(e,t,n){},fe9a:function(e,t,n){}});
//# sourceMappingURL=app.89bccd3f.js.map